package ca.csf.mobile2.tp2.question

import android.annotation.SuppressLint
import androidx.appcompat.app.AppCompatActivity
import ca.csf.mobile2.tp2.R
import com.google.android.material.textfield.TextInputLayout
import org.androidannotations.annotations.*
import java.util.*
import ca.csf.mobile2.tp2.databinding.ActivityCreateQuestionBinding
import ca.csf.mobile2.tp2.question.viewModels.CreateQuestionActivityViewModel
import org.androidannotations.annotations.*

@SuppressLint("Registered") //Reason : Generated by Android Annotations
@DataBound
@EActivity(R.layout.activity_create_question)
class CreateQuestionActivity : AppCompatActivity(){

    @BindingObject
    protected lateinit var binding : ActivityCreateQuestionBinding

    @InstanceState
    protected  lateinit var viewModel: CreateQuestionActivityViewModel
    private lateinit var questionData : QuestionData

    @Bean
    protected lateinit var questionService: QuestionService

    @AfterViews
    protected fun onCreate(){
        if (!this::viewModel.isInitialized ) {
            viewModel =
                CreateQuestionActivityViewModel(
                    QuestionData(null,null,null,null,null,null)
                )
        }
        questionData = viewModel.questionData
        binding.viewModel = viewModel
    }

    @Click(R.id.createButton)
    protected fun createQuestion(){
        val questionData = createQuestionData()
        questionService.createQuestion(questionData,this::onSuccess,this::onServerError,this::onConnectivityError)
    }

}